// Generated by CoffeeScript 1.6.1
(function(){var e;e=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d;c=void 0;l=void 0;s=void 0;a=void 0;i=void 0;u=void 0;p=void 0;o=void 0;r=void 0;f=void 0;d=void 0;f=new google.maps.LatLng(38.959330033499675,-95.26810996977234);d=12;if(e){f=new google.maps.LatLng(parseFloat(e),parseFloat(t));d=17}h={zoom:d,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP};s=new google.maps.Geocoder;l=new google.maps.Map(document.getElementById("residence_map"),h);a=document.getElementById("residence_address");i=new google.maps.places.Autocomplete(a);i.bindTo("bounds",l);u=new google.maps.InfoWindow;c=new google.maps.Marker({map:l,draggable:!0});google.maps.event.addListener(c,"drag",function(){s.geocode({latLng:c.getPosition()},function(e,t){if(t===google.maps.GeocoderStatus.OK&&e[0]){jQuery("#map_address").val(e[0].formatted_address);return jQuery(n).val(c.getPosition().lat()+","+c.getPosition().lng())}});u.close();return u.setContent(null)});if(e){c.setPosition(new google.maps.LatLng(parseFloat(e),parseFloat(t)));c.setMap(l)}return google.maps.event.addListener(i,"place_changed",function(){c=null;c=new google.maps.Marker({map:l,draggable:!0});google.maps.event.addListener(c,"drag",function(){s.geocode({latLng:c.getPosition()},function(e,t){if(t===google.maps.GeocoderStatus.OK&&e[0]){jQuery("#map_address").val(e[0].formatted_address);return jQuery(n).val(c.getPosition().lat()+","+c.getPosition().lng())}});u.close();return u.setContent(null)});u.close();a.className="";p=i.getPlace();if(!p.geometry){a.className="notfound";return}if(p.geometry.viewport)l.fitBounds(p.geometry.viewport);else{l.setCenter(p.geometry.location);l.setZoom(17)}r="";jQuery(n).val(p.geometry.location.toString().slice(1,-1));p.address_components&&(r=[p.address_components[0]&&p.address_components[0].short_name||"",p.address_components[1]&&p.address_components[1].short_name||"",p.address_components[2]&&p.address_components[2].short_name||""].join(" "));c.setPosition(p.geometry.location);u.setContent("<div><strong>"+p.name+"</strong><br>"+r);s.geocode({latLng:c.getPosition()},function(e,t){if(t===google.maps.GeocoderStatus.OK&&e[0]){jQuery("#map_address").val(e[0].formatted_address);return jQuery(n).val(c.getPosition().lat()+","+c.getPosition().lng())}});google.maps.event.addListener(c,"click",function(){return u.open(l,c)});return c.setMap(l)})};jQuery(document).ready(function(e){e(".custom_media_upload").click(function(t){var n,r;t.preventDefault();n=e(this);r=wp.media({title:"Upload Media",button:{text:"Choose Media"},multiple:!1}).on("select",function(){var t;t=r.state().get("selection").first().toJSON();e(n).siblings(".custom_media_image").attr("src",t.url);e(n).siblings(".custom_media_url").val(t.url)}).open()})});jQuery(function(e){e("#media-items").bind("DOMNodeInserted",function(){return e('input[value="Insert into Post"]').each(function(){return e(this).attr("value","Use This Image")})});e(".custom_upload_image_button").click(function(){var t,n;t=e(this).siblings(".custom_upload_image");n=e(this).siblings(".custom_preview_image");tb_show("","media-upload.php?type=image&TB_iframe=true");window.send_to_editor=function(r){var i,s,o;o=e("img",r).attr("src");i=e("img",r).attr("class");s=i.replace(/(.*?)wp-image-/,"");t.val(s);n.attr("src",o);return tb_remove()};return!1});e(".custom_clear_image_button").click(function(){var t;t=e(this).parent().siblings(".custom_default_image").text();e(this).parent().siblings(".custom_upload_image").val("");e(this).parent().siblings(".custom_preview_image").attr("src",t);return!1});e(".repeatable-add").click(function(){var t,n;t=e(this).closest("td").find(".custom_repeatable li:last").clone(!0);n=e(this).closest("td").find(".custom_repeatable li:last");e("textarea",t).val("").attr("name",function(e,t){return t.replace(/(\d+)/,function(e,t){return Number(t)+1})});t.insertAfter(n,e(this).closest("td"));return!1});e(".repeatable-remove").click(function(){e(this).parent().remove();return!1});e(".custom_repeatable").sortable({opacity:.6,revert:!0,cursor:"move",handle:".sort"});e(".repeatable-adds").click(function(){var t,n;t=e(this).closest("td").find(".custom_repeatables li:last").clone(!0);n=e(this).closest("td").find(".custom_repeatables li:last");e("input",t).val("").attr("name",function(e,t){return t.replace(/(\d+)/,function(e,t){return Number(t)+1})});t.insertAfter(n,e(this).closest("td"));return!1});e(".repeatable-removes").click(function(){e(this).parent().remove();return!1});e(".custom_repeatables").sortable({opacity:.6,revert:!0,cursor:"move",handle:".sort"});return e(".list-icons").siblings(".preview-icons").click(function(){var t;t=e(this).siblings(".list-icons");e(t).toggleClass("active");return e(t).children("li").click(function(){var n,r,i,s;n=e(t).siblings(".hidden-icons");r=e(t).siblings(".preview-icons");i=e(this).attr("data-value");e(n).attr("value",i);e(this).attr("data-selected","selected");s='<i class="icon-'+i+'"></i>&nbsp;'+i+'&nbsp;<i class="icon-angle-down"></i>';e(r).html(s);e(this).siblings().removeClass("active");return e(t).removeClass("active")})})})}).call(this);